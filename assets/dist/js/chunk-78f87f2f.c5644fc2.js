(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78f87f2f"],{"11e9":function(t,e,n){var r=n("52a7"),a=n("4630"),i=n("6821"),o=n("6a99"),c=n("69a8"),u=n("c69a"),l=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?l:function(t,e){if(t=i(t),e=o(e,!0),u)try{return l(t,e)}catch(n){}if(c(t,e))return a(!r.f.call(t,e),t[e])}},"365c":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"h",(function(){return l})),n.d(e,"f",(function(){return s})),n.d(e,"g",(function(){return f})),n.d(e,"i",(function(){return p}));var r=n("1c1e");function a(){return Object(r["a"])({url:"/interface/getConfigSample",method:"get"})}function i(){return Object(r["a"])({url:"/interface/getCurrentConfig",method:"get"})}function o(t,e){return Object(r["a"])({url:"/interface/plugin/".concat(t,"/"),method:"post",data:e})}function c(t,e){return Object(r["a"])({url:"/interface/plugin/".concat(t,"/").concat(e),method:"delete"})}function u(t,e){return Object(r["a"])({url:"/interface/plugin/".concat(t,"/").concat(e),method:"get"})}function l(t,e,n){return Object(r["a"])({url:"/interface/plugin/".concat(t,"/").concat(e),method:"put",data:n})}function s(t){return Object(r["a"])({url:"/interface/pointMap/"+t,method:"get"})}function f(t){return Object(r["a"])({url:"/interface/probePointMap/"+t,method:"get"})}function p(t,e){return Object(r["a"])({url:"/interface/pointMap/"+t,method:"put",data:e})}},"454f":function(t,e,n){n("46a7");var r=n("584a").Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},"456d":function(t,e,n){var r=n("4bf8"),a=n("0d58");n("5eda")("keys",(function(){return function(t){return a(r(t))}}))},"46a7":function(t,e,n){var r=n("63b6");r(r.S+r.F*!n("8e60"),"Object",{defineProperty:n("d9f6").f})},"4c8b":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-form",{ref:"leanForm",attrs:{model:t.form}},[t.isEditing?n("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[n("span",[t._v(t._s(t.currentType))])]):t._e(),t.isEditing?t._e():n("el-form-item",{attrs:{label:"类型","label-width":t.formLabelWidth}},[n("el-select",{attrs:{placeholder:"选择数据源类型"},model:{value:t.form.plugin_name,callback:function(e){t.$set(t.form,"plugin_name",e)},expression:"form.plugin_name"}},t._l(t.inputType,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t._l(t.form.fields,(function(e,r){return n("el-form-item",{key:r,attrs:{label:e.label,"label-width":t.formLabelWidth}},["input"===e.type?n("el-input",{attrs:{autoComplete:"off"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}}):t._e(),"combine"===e.type?[n("el-input",{staticStyle:{width:"80px","margin-right":"10px"},attrs:{autoComplete:"off"},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}}),n("el-select",{staticStyle:{width:"70px"},model:{value:e.unit,callback:function(n){t.$set(e,"unit",n)},expression:"item.unit"}},t._l(t.units,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)]:t._e(),"radio"===e.type?[n("el-radio-group",{model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)]:t._e(),"text"===e.type?n("el-input",{attrs:{type:"textarea",autoComplete:"off",rows:10},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"item.value"}}):t._e()],2)}))],2)],1)},a=[],i=(n("ac6a"),n("456d"),{name:"lean-form",props:{sampleData:{type:Object,default:function(){return{}}},reset:{type:Boolean,default:!1},isEditing:{type:Boolean,default:!1},formData:{type:Object,default:function(){return{}}},currentType:{type:String,default:""}},data:function(){return{formLabelWidth:"140px",form:{plugin_name:"",fields:[]},units:["s","ms"]}},computed:{dataType:function(){return console.log(this.form.plugin_name),this.form.plugin_name},inputType:function(){return Object.keys(this.sampleData)}},watch:{currentType:function(t,e){console.log(this.formData),this.formatForm()},dataType:function(t,e){this.formatForm()},"form.fields":{handler:function(){console.log(this.form),this.$emit("changeFormData",this.form)},deep:!0},reset:function(t,e){this.resetForm()}},methods:{formatForm:function(){var t=this;this.form.fields=[];var e=this.isEditing?this.currentType:this.dataType;e&&Object.keys(this.sampleData).length>0&&this.sampleData[e].forEach((function(e,n){if("none"!==e.Type&&"plugin_name"!==e.Key)if("combine"===e.Type){var r=t.isEditing?t.formData[e.Key]:e.Default,a=/[a-z]*$/.exec(r)[0],i=/^[0-9]*/.exec(r)[0];t.form.fields.push({key:e.Key,value:i,label:e.Label,type:e.Type,unit:a})}else{if("text"===e.Type&&!t.isEditing)return;t.form.fields.push({key:e.Key,value:t.isEditing?t.formData[e.Key]:e.Default,label:e.Label,type:e.Type})}}))},formChange:function(){console.log("change")},resetForm:function(){this.form={plugin_name:"",fields:[]}}},mounted:function(){var t=this;this.$nextTick((function(){t.formatForm()}))}}),o=i,c=n("2877"),u=Object(c["a"])(o,r,a,!1,null,null,null);e["a"]=u.exports},"5eda":function(t,e,n){var r=n("5ca1"),a=n("8378"),i=n("79e5");t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*i((function(){n(1)})),"Object",o)}},"6b4a":function(t,e,n){"use strict";var r=n("786b"),a=n.n(r);a.a},"786b":function(t,e,n){},"85f2":function(t,e,n){t.exports=n("454f")},8694:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container",staticStyle:{width:"900px",margin:"0 auto"}},[n("h1",[t._v("编辑数据源配置")]),n("el-card",{staticClass:"mb20"},[n("lean-form",{attrs:{"sample-data":t.inputConfig,"form-data":t.data,"is-editing":!0,"current-type":t.data.plugin_name},on:{changeFormData:t.changeFormData}})],1),n("el-button",{staticClass:"pull-right",attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateDataSource()}}},[t._v("保存")]),n("el-button",{staticClass:"pull-right",staticStyle:{"margin-right":"20px"},attrs:{type:"default",size:"small"},on:{click:function(e){return t.jumpTo()}}},[t._v("返回上一页")])],1)},a=[],i=(n("8e6e"),n("456d"),n("ac6a"),n("96cf"),n("3b8d")),o=n("bd86"),c=n("365c"),u=n("4c8b"),l=n("2f62");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(n,!0).forEach((function(e){Object(o["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={name:"KeyEdit",components:{LeanForm:u["a"]},data:function(){return{id:"",data:{},inputConfig:{},currentData:{}}},computed:f({},Object(l["b"])(["token"])),methods:{fetchData:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["e"]("inputs",this.id);case 2:e=t.sent,n=e.data,this.data=n;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updateDataSource:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={plugin_name:this.data.plugin_name},n=Object.assign([],this.currentData.fields),n.forEach((function(t){"combine"!==t.type?e[t.key]=t.value:e[t.key]="".concat(t.value).concat(t.unit)})),t.next=5,c["h"]("inputs",this.id,e);case 5:t.sent,this.$message({message:"修改成功！",type:"success"});case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),jumpTo:function(){this.$router.push("/input/index")},initConfig:function(){this.inputConfig=JSON.parse(localStorage.getItem("INPUT_PLUGIN_CONFIG"))},changeFormData:function(t){this.currentData=t}},mounted:function(){this.$nextTick((function(){this.id=this.$route.params.id,this.fetchData(this.key),this.initConfig()}))}},m=p,d=(n("6b4a"),n("2877")),h=Object(d["a"])(m,r,a,!1,null,"215bfd72",null);e["default"]=h.exports},"8e6e":function(t,e,n){var r=n("5ca1"),a=n("990b"),i=n("6821"),o=n("11e9"),c=n("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,n,r=i(t),u=o.f,l=a(r),s={},f=0;while(l.length>f)n=u(r,e=l[f++]),void 0!==n&&c(s,e,n);return s}})},9093:function(t,e,n){var r=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},"990b":function(t,e,n){var r=n("9093"),a=n("2621"),i=n("cb7c"),o=n("7726").Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(i(t)),n=a.f;return n?e.concat(n(t)):e}},ac6a:function(t,e,n){for(var r=n("cadf"),a=n("0d58"),i=n("2aba"),o=n("7726"),c=n("32e9"),u=n("84f2"),l=n("2b4c"),s=l("iterator"),f=l("toStringTag"),p=u.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=a(m),h=0;h<d.length;h++){var b,g=d[h],y=m[g],v=o[g],O=v&&v.prototype;if(O&&(O[s]||c(O,s,p),O[f]||c(O,f,g),u[g]=p,y))for(b in r)O[b]||i(O,b,r[b],!0)}},bd86:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("85f2"),a=n.n(r);function i(t,e,n){return e in t?a()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},f1ae:function(t,e,n){"use strict";var r=n("86cc"),a=n("4630");t.exports=function(t,e,n){e in t?r.f(t,e,a(0,n)):t[e]=n}}}]);
//# sourceMappingURL=chunk-78f87f2f.c5644fc2.js.map