(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-030d4faa"],{4496:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("h2",{staticClass:"title"},[t._v("\n        数据输出\n\n    ")]),n("el-card",[n("el-button",{staticClass:"pull-right mb20",attrs:{type:"primary",size:"medium"},on:{click:function(e){t.isModalShow=!0}}},[t._v("添加数据源")]),n("el-table",{attrs:{data:t.outputData,stripe:!0,size:"small","default-sort":{prop:"created_at",order:"descending"},border:""}},[n("el-table-column",{attrs:{type:"index"}}),n("el-table-column",{attrs:{prop:"plugin_name",label:"类型"}}),n("el-table-column",{attrs:{prop:"url_address",label:"地址"}}),n("el-table-column",{attrs:{prop:"created_at",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("formatDate")(e.row.created_at))+"\n                ")]}}])}),n("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:function(n){t.editData(e.row)}}},[t._v("编辑")]),n("el-button",{attrs:{type:"danger",size:"small",round:""},on:{click:function(n){t.confirmDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),n("el-dialog",{attrs:{title:"添加数据源",visible:t.isModalShow,width:"500px"},on:{"update:visible":function(e){t.isModalShow=e}}},[n("lean-form",{attrs:{"sample-data":t.outputConfig},on:{changeFormData:t.changeFormData}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.isModalShow=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.createDataSource}},[t._v("确 定")])],1)],1)],1)},a=[],s=(n("ac6a"),n("456d"),n("96cf"),n("1da1")),i=n("be94"),u=n("365c"),o=n("4c8b"),c=n("2f62"),h=n("5a0c"),l=n.n(h),d={components:{LeanForm:o["a"]},data:function(){return{tableData:[],isModalShow:!1,form:{},currentDataSource:{},formLabelWidth:"80px",outputConfig:null,outputType:[],outputData:[],units:["s","ms"]}},computed:Object(i["a"])({},Object(c["b"])(["token"])),filters:{formatDate:function(t){return t?l()(t).format("YYYY-MM-DD HH:mm:ss"):""}},methods:{getInitConfig:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["c"]();case 2:e=t.sent,n=e.data,this.outputConfig=n.outputs,this.outputType=Object.keys(n.outputs),window.localStorage.setItem("OUTPUT_PLUGIN_CONFIG",JSON.stringify(this.outputConfig)),window.localStorage.setItem("OUTPUT_PLUGIN_TYPE",JSON.stringify(this.outputType));case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),geInitData:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["d"]();case 2:e=t.sent,n=e.data,this.outputData=n.outputs;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),createDataSource:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={plugin_name:this.form.plugin_name},this.form.fields.forEach(function(t){"combine"!==t.type?e[t.key]=t.value:e[t.key]="".concat(t.value).concat(t.unit)}),console.log(e),t.prev=3,t.next=6,u["a"]("outputs",e);case 6:n=t.sent,this.outputData.splice(0,0,n.data),this.$message({message:"添加成功！",type:"success"}),this.isModalShow=!1,t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),console.log(t.t0),this.$message({message:JSON.stringify(t.t0.data),type:"error"});case 16:case"end":return t.stop()}},t,this,[[3,12]])}));function e(){return t.apply(this,arguments)}return e}(),deleteKey:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u["b"]("outputs",this.currentDataSource.id);case 3:e=t.sent,e.data&&(this.outputData=e.data,this.$message({message:"删除成功！",type:"success"})),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),this.$message({message:"删除失败！",type:"error"});case 10:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),editData:function(t){this.$router.push("/output/detail/".concat(t.id))},confirmDelete:function(t){var e=this;this.currentDataSource=t,this.$confirm("确认要删除数据源： ".concat(this.currentDataSource.name_override,"?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteKey()})},changeFormData:function(t){this.form=t}},beforeMount:function(){this.getInitConfig()},mounted:function(){var t=this;this.$nextTick(function(){t.geInitData()})}},f=d,p=n("2877"),m=Object(p["a"])(f,r,a,!1,null,null,null);m.options.__file="index.vue";e["default"]=m.exports},"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,function(){"use strict";var t="millisecond",e="second",n="minute",r="hour",a="day",s="week",i="month",u="year",o=/^(\d{4})-?(\d{1,2})-?(\d{0,2})(.*?(\d{1,2}):(\d{1,2}):(\d{1,2}))?.?(\d{1,3})?$/,c=/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},l=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},d={padStart:l,padZoneStr:function(t){var e=Math.abs(t),n=Math.floor(e/60),r=e%60;return(t<=0?"+":"-")+l(n,2,"0")+":"+l(r,2,"0")},monthDiff:function(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months"),a=e-r<0,s=t.clone().add(n+(a?-1:1),"months");return Number(-(n+(e-r)/(a?r-s:s-r)))},absFloor:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},prettyUnit:function(o){return{M:i,y:u,w:s,d:a,h:r,m:n,s:e,ms:t}[o]||String(o||"").toLowerCase().replace(/s$/,"")},isUndefined:function(t){return void 0===t}},f="en",p={};p[f]=h;var m=function(t){return t instanceof D},$=function(t,e,n){var r;if(!t)return null;if("string"==typeof t)p[t]&&(r=t),e&&(p[t]=e,r=t);else{var a=t.name;p[a]=t,r=a}return n||(f=r),r},g=function(t,e){if(m(t))return t.clone();var n=e||{};return n.date=t,new D(n)},y=function(t,e){return g(t,{locale:e.$L})},b=d;b.parseLocale=$,b.isDayjs=m,b.wrapper=y;var D=function(){function h(t){this.parse(t)}var l=h.prototype;return l.parse=function(t){var e,n;this.$d=null===(e=t.date)?new Date(NaN):b.isUndefined(e)?new Date:e instanceof Date?e:"string"==typeof e&&/.*[^Z]$/i.test(e)&&(n=e.match(o))?new Date(n[1],n[2]-1,n[3]||1,n[5]||0,n[6]||0,n[7]||0,n[8]||0):new Date(e),this.init(t)},l.init=function(t){this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds(),this.$L=this.$L||$(t.locale,null,!0)||f},l.$utils=function(){return b},l.isValid=function(){return!("Invalid Date"===this.$d.toString())},l.$compare=function(t){return this.valueOf()-g(t).valueOf()},l.isSame=function(t){return 0===this.$compare(t)},l.isBefore=function(t){return this.$compare(t)<0},l.isAfter=function(t){return this.$compare(t)>0},l.year=function(){return this.$y},l.month=function(){return this.$M},l.day=function(){return this.$W},l.date=function(){return this.$D},l.hour=function(){return this.$H},l.minute=function(){return this.$m},l.second=function(){return this.$s},l.millisecond=function(){return this.$ms},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(t,o){var c=this,h=!!b.isUndefined(o)||o,l=function(t,e){var n=y(new Date(c.$y,e,t),c);return h?n:n.endOf(a)},d=function(t,e){return y(c.toDate()[t].apply(c.toDate(),h?[0,0,0,0].slice(e):[23,59,59,999].slice(e)),c)};switch(b.prettyUnit(t)){case u:return h?l(1,0):l(31,11);case i:return h?l(1,this.$M):l(0,this.$M+1);case s:return l(h?this.$D-this.$W:this.$D+(6-this.$W),this.$M);case a:case"date":return d("setHours",0);case r:return d("setMinutes",1);case n:return d("setSeconds",2);case e:return d("setMilliseconds",3);default:return this.clone()}},l.endOf=function(t){return this.startOf(t,!1)},l.$set=function(s,o){switch(b.prettyUnit(s)){case a:this.$d.setDate(this.$D+(o-this.$W));break;case"date":this.$d.setDate(o);break;case i:this.$d.setMonth(o);break;case u:this.$d.setFullYear(o);break;case r:this.$d.setHours(o);break;case n:this.$d.setMinutes(o);break;case e:this.$d.setSeconds(o);break;case t:this.$d.setMilliseconds(o)}return this.init(),this},l.set=function(t,e){return this.clone().$set(t,e)},l.add=function(t,o){var c=this;t=Number(t);var h,l=b.prettyUnit(o),d=function(e,n){var r=c.set("date",1).set(e,n+t);return r.set("date",Math.min(c.$D,r.daysInMonth()))},f=function(e){var n=new Date(c.$d);return n.setDate(n.getDate()+e*t),y(n,c)};if(l===i)return d(i,this.$M);if(l===u)return d(u,this.$y);if(l===a)return f(1);if(l===s)return f(7);switch(l){case n:h=6e4;break;case r:h=36e5;break;case e:h=1e3;break;default:h=1}var p=this.valueOf()+t*h;return y(p,this)},l.subtract=function(t,e){return this.add(-1*t,e)},l.format=function(t){var e=this,n=t||"YYYY-MM-DDTHH:mm:ssZ",r=b.padZoneStr(this.$d.getTimezoneOffset()),a=this.$locale(),s=a.weekdays,i=a.months,u=function(t,e,n,r){return t&&t[e]||n[e].substr(0,r)};return n.replace(c,function(t){if(t.indexOf("[")>-1)return t.replace(/\[|\]/g,"");switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return String(e.$y);case"M":return String(e.$M+1);case"MM":return b.padStart(e.$M+1,2,"0");case"MMM":return u(a.monthsShort,e.$M,i,3);case"MMMM":return i[e.$M];case"D":return String(e.$D);case"DD":return b.padStart(e.$D,2,"0");case"d":return String(e.$W);case"dd":return u(a.weekdaysMin,e.$W,s,2);case"ddd":return u(a.weekdaysShort,e.$W,s,3);case"dddd":return s[e.$W];case"H":return String(e.$H);case"HH":return b.padStart(e.$H,2,"0");case"h":case"hh":return 0===e.$H?12:b.padStart(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0");case"a":return e.$H<12?"am":"pm";case"A":return e.$H<12?"AM":"PM";case"m":return String(e.$m);case"mm":return b.padStart(e.$m,2,"0");case"s":return String(e.$s);case"ss":return b.padStart(e.$s,2,"0");case"SSS":return b.padStart(e.$ms,3,"0");case"Z":return r;default:return r.replace(":","")}})},l.diff=function(t,o,c){var h=b.prettyUnit(o),l=g(t),d=this-l,f=b.monthDiff(this,l);switch(h){case u:f/=12;break;case i:break;case"quarter":f/=3;break;case s:f=d/6048e5;break;case a:f=d/864e5;break;case r:f=d/36e5;break;case n:f=d/6e4;break;case e:f=d/1e3;break;default:f=d}return c?f:b.absFloor(f)},l.daysInMonth=function(){return this.endOf(i).$D},l.$locale=function(){return p[this.$L]},l.locale=function(t,e){var n=this.clone();return n.$L=$(t,e,!0),n},l.clone=function(){return y(this.toDate(),this)},l.toDate=function(){return new Date(this.$d)},l.toArray=function(){return[this.$y,this.$M,this.$D,this.$H,this.$m,this.$s,this.$ms]},l.toJSON=function(){return this.toISOString()},l.toISOString=function(){return this.toDate().toISOString()},l.toObject=function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}},l.toString=function(){return this.$d.toUTCString()},h}();return g.extend=function(t,e){return t(e,D,g),g},g.locale=$,g.isDayjs=m,g.unix=function(t){return g(1e3*t)},g.en=p[f],g})}}]);
//# sourceMappingURL=chunk-030d4faa.f15dd1f7.js.map