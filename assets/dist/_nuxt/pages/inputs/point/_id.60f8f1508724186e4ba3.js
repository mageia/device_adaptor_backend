webpackJsonp([6],{E8K3:function(t,n,e){"use strict";var i=e("mvHQ"),a=e.n(i),o=e("Xxa5"),r=e.n(o),s=e("exGp"),u=e.n(s),c=e("VFlG");n.a={data:function(){return{id:"",form:{},currentJson:{}}},components:{JsonEditor:c.a},methods:{fetchData:function(){var t=u()(r.a.mark(function t(){var n,e;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$axios({method:"get",url:"/pointMap/"+this.id});case 2:n=t.sent,e=n.data,this.form=e,this.currentJson=e.point_map_content?JSON.parse(e.point_map_content):{};case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),updateDataSource:function(){var t=u()(r.a.mark(function t(){var n;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={point_map_path:this.form.point_map_path,point_map_content:a()(this.currentJson)},t.next=3,this.$axios({method:"put",url:"/pointMap/"+this.id,data:n});case 3:t.sent,this.$message({message:"修改成功！",type:"success"});case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),jumpTo:function(){this.$router.push("/")},changeData:function(t){console.log(t),this.currentJson=t}},mounted:function(){this.$nextTick(function(){this.id=this.$route.params.id,this.fetchData(this.key)})}}},"M/DI":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("E8K3"),a=e("u5jp"),o=e("VU/8")(i.a,a.a,!1,null,null,null);o.options.__file="pages/inputs/point/_id.vue",n.default=o.exports},P6sN:function(t,n,e){"use strict";var i=function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"jsonEditor",staticClass:"json-editor",style:{height:this.height+"px"}})};i._withStripped=!0;var a={render:i,staticRenderFns:[]};n.a=a},UPuY:function(t,n,e){"use strict";n.a={name:"json-editor",props:{height:{type:Number,default:500},data:{type:Object,default:function(){return{}}}},watch:{data:function(t,n){this.updateEditor(),this.$emit("onChange",this.data)}},methods:{initJsonEditor:function(){var t=null;"undefined"!=typeof window&&(t=e("BD75"));var n=this,i={mode:"code",modes:["code","text","view"],ace:!1,onEditable:function(t){if(!t.path)return!0},onError:function(t){alert(t.toString())},onChange:function(){var t=null;try{t=n.getEditorJson()}catch(t){return}n.$emit("onChange",t)}};this.editor=new t(this.$refs.jsonEditor,i)},updateEditor:function(){this.editor.set(this.data)},getEditorJson:function(){return this.editor.get()}},mounted:function(){this.initJsonEditor()}}},VFlG:function(t,n,e){"use strict";var i=e("UPuY"),a=e("P6sN"),o=e("VU/8")(i.a,a.a,!1,null,null,null);o.options.__file="components/jsonEditor.vue",n.a=o.exports},u5jp:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"app-container",staticStyle:{width:"900px",margin:"0 auto"}},[e("h1",[t._v("编辑点表")]),e("el-card",{staticClass:"mb20"},[e("el-form",{attrs:{"label-position":"left","label-width":"80px",model:t.form}},[e("el-form-item",{attrs:{label:"点表地址"}},[e("el-input",{model:{value:t.form.point_map_path,callback:function(n){t.$set(t.form,"point_map_path",n)},expression:"form.point_map_path"}})],1)],1),e("h4",[t._v("点表详情")]),e("no-ssr",[e("json-editor",{attrs:{data:t.currentJson,height:500},on:{onChange:t.changeData}})],1)],1),e("el-button",{staticClass:"pull-right",attrs:{type:"primary",size:"small"},on:{click:function(n){t.updateDataSource()}}},[t._v("保存")]),e("el-button",{staticClass:"pull-right",staticStyle:{"margin-right":"20px"},attrs:{type:"default",size:"small"},on:{click:function(n){t.jumpTo()}}},[t._v("返回上一页")])],1)};i._withStripped=!0;var a={render:i,staticRenderFns:[]};n.a=a}});